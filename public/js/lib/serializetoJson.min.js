(function(f){if("function"===typeof define&&define.amd)define(["jquery"],f);else if("object"===typeof exports){var a=require("jquery");module.exports=f(a)}else f(window.jQuery||window.Zepto||window.$)})(function(f){f.fn.serializeJSON=function(a){var b,c,d,e,g,k,h,m,l,n;b=f.serializeJSON;c=this;d=b.setupOpts(a);a=c.serializeArray();b.readCheckboxUncheckedValues(a,d,c);e={};f.each(a,function(a,f){g=f.name;k=f.value;h=b.extractTypeAndNameWithNoType(g);m=h.nameWithNoType;(l=h.type)||(l=b.tryToFindTypeFromDataAttr(g,
    c));b.validateType(g,l,d);"skip"!==l&&(n=b.splitInputNameIntoKeysArray(m),k=b.parseValue(k,g,l,d),b.deepSet(e,n,k,d))});return e};f.serializeJSON={defaultOptions:{checkboxUncheckedValue:void 0,parseNumbers:!1,parseBooleans:!1,parseNulls:!1,parseAll:!1,parseWithFunction:null,customTypes:{},defaultTypes:{string:function(a){return String(a)},number:function(a){return Number(a)},"boolean":function(a){return-1===["false","null","undefined","","0"].indexOf(a)},"null":function(a){return-1===["false","null",
    "undefined","","0"].indexOf(a)?a:null},array:function(a){return JSON.parse(a)},object:function(a){return JSON.parse(a)},auto:function(a){return f.serializeJSON.parseValue(a,null,null,{parseNumbers:!0,parseBooleans:!0,parseNulls:!0})},skip:null},useIntKeysAsArrayIndex:!1},setupOpts:function(a){var b,c,d;c=f.serializeJSON;null==a&&(a={});d=c.defaultOptions||{};c="checkboxUncheckedValue parseNumbers parseBooleans parseNulls parseAll parseWithFunction customTypes defaultTypes useIntKeysAsArrayIndex".split(" ");
    for(b in a)if(-1===c.indexOf(b))throw Error("serializeJSON ERROR: invalid option '"+b+"'. Please use one of "+c.join(", "));b=function(b){return!1!==a[b]&&""!==a[b]&&(a[b]||d[b])};c=b("parseAll");return{checkboxUncheckedValue:b("checkboxUncheckedValue"),parseNumbers:c||b("parseNumbers"),parseBooleans:c||b("parseBooleans"),parseNulls:c||b("parseNulls"),parseWithFunction:b("parseWithFunction"),typeFunctions:f.extend({},b("defaultTypes"),b("customTypes")),useIntKeysAsArrayIndex:b("useIntKeysAsArrayIndex")}},
    parseValue:function(a,b,c,d){var e,g;e=f.serializeJSON;g=a;d.typeFunctions&&c&&d.typeFunctions[c]?g=d.typeFunctions[c](a):d.parseNumbers&&e.isNumeric(a)?g=Number(a):!d.parseBooleans||"true"!==a&&"false"!==a?d.parseNulls&&"null"==a&&(g=null):g="true"===a;d.parseWithFunction&&!c&&(g=d.parseWithFunction(g,b));return g},isObject:function(a){return a===Object(a)},isUndefined:function(a){return void 0===a},isValidArrayIndex:function(a){return/^[0-9]+$/.test(String(a))},isNumeric:function(a){return 0<=a-
        parseFloat(a)},optionKeys:function(a){if(Object.keys)return Object.keys(a);var b,c=[];for(b in a)c.push(b);return c},readCheckboxUncheckedValues:function(a,b,c){var d,e,g;null==b&&(b={});g=f.serializeJSON;c.find("input[type=checkbox][name]:not(:checked):not([disabled])").add(c.filter("input[type=checkbox][name]:not(:checked):not([disabled])")).each(function(c,h){d=f(h);(e=d.attr("data-unchecked-value"))?a.push({name:h.name,value:e}):g.isUndefined(b.checkboxUncheckedValue)||a.push({name:h.name,value:b.checkboxUncheckedValue})})},
    extractTypeAndNameWithNoType:function(a){var b;return(b=a.match(/(.*):([^:]+)$/))?{nameWithNoType:b[1],type:b[2]}:{nameWithNoType:a,type:null}},tryToFindTypeFromDataAttr:function(a,b){var c;c='[name="'+a.replace(/(:|\.|\[|\]|\s)/g,"\\$1")+'"]';return b.find(c).add(b.filter(c)).attr("data-value-type")||null},validateType:function(a,b,c){var d;d=f.serializeJSON;c=d.optionKeys(c?c.typeFunctions:d.defaultOptions.defaultTypes);if(b&&-1===c.indexOf(b))throw Error("serializeJSON ERROR: Invalid type "+b+
        " found in input name '"+a+"', please use one of "+c.join(", "));return!0},splitInputNameIntoKeysArray:function(a){a=a.split("[");a=f.map(a,function(a){return a.replace(/\]/g,"")});""===a[0]&&a.shift();return a},deepSet:function(a,b,c,d){var e,g,k,h;null==d&&(d={});h=f.serializeJSON;if(h.isUndefined(a))throw Error("ArgumentError: param 'o' expected to be an object or array, found undefined");if(!b||0===b.length)throw Error("ArgumentError: param 'keys' expected to be an array with least one element");
        e=b[0];if(1===b.length)""===e?a.push(c):a[e]=c;else{g=b[1];""===e&&(e=a.length-1,k=a[e],e=h.isObject(k)&&(h.isUndefined(k[g])||2<b.length)?e:e+1);if(""===g){if(h.isUndefined(a[e])||!f.isArray(a[e]))a[e]=[]}else if(d.useIntKeysAsArrayIndex&&h.isValidArrayIndex(g)){if(h.isUndefined(a[e])||!f.isArray(a[e]))a[e]=[]}else if(h.isUndefined(a[e])||!h.isObject(a[e]))a[e]={};b=b.slice(1);h.deepSet(a[e],b,c,d)}}}});